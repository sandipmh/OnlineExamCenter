<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="menu/dashboard::layout(~{::section})">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings Page</title>
  <!-- Add Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <!-- Add your custom CSS -->

</head>

<body>
<section>
  <style>
      .bgpage {
        background-color: [[${bgcolor}]];
      }
      .container {
        margin-top: 50px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .card-body {
        padding-top: 5px;
        width: 750px;
        height: auto;
        margin-top: 10px;
        align-self: center;
        border-top-width: 4px;
        border-top: thick green;
        background-image: linear-gradient(to top, #dfe9f3 0%, white 100%);

      }

      img {
        border-radius: 50%;
        width: 110px;
        height: auto;
      }

      .medatory {
        color: red;
      }
    </style>

  <div class="card mt-1">
    <div class="card-body">
      <div class="row ">
        <div class="profile col-8 offset-2 pt-3 pb-3">
          <img src="/images/60111.jpg" alt="Avatar" width="170" height="150">
        </div>
        <div class="col-2 pt-4 ps-5">
          <a href="" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
              <span class="edit material-symbols-outlined" style="vertical-align: middle;">
                edit_note
              </span>
          </a>
        </div>
        <div class="col-5 offset-1 pb-2">First Name <span class="medatory">*</span></div>
        <div class="col-5 offset-1 pb-2">Last Name <span class="medatory">*</span></div>
        <div class="col-5 offset-1"><input type="text" id="_firstname" class="form-control"
                                           th:value="${user.firstName}" readonly></div>
        <div class="col-5 offset-1"><input type="text" id="_lastname" class="form-control" th:value="${user.lastName}"
                                           readonly></div>
        <div class="col-10 offset-1 pt-3">Email <span class="medatory">*</span></div>
        <div class="col-11 offset-1 pt-2"><input type="text" id="_email" class="form-control" th:value="${user.email}"
                                                 readonly></div>
        <div class="col-10 offset-1 pt-3">Password <span class="medatory">*</span></div>
        <div class="col-11 offset-1 pt-2"><input type="password" id="_password" class="form-control"
                                                 th:value="${user.password}" readonly>
        </div>
        <div class="col-10 offset-1 pt-3">Country <span class="medatory">*</span></div>
        <div class="col offset-1 pt-2">
          <select class="form-select" aria-label="Default select example" disabled>
            <option th:value="${user.countryCode}" th:text="${user.country.countryName}" selected></option>
          </select>
        </div>
        <div class="col-10 offset-1 pt-3 pb-2">Phone Number <span class="medatory">*</span></div>
        <div class="col-3 offset-1">
          <select class="form-select" aria-label="Default select example" disabled>
            <option th:value="${user.country.countryName}" th:text="${user.country.countryCode}"></option>
          </select>
        </div>
        <div class="col-7 offset-1"><input type="text" id="_mobile" class="form-control" th:value="${user.mobile}"
                                           readonly></div>
        <div class="col-10 offset-1 pt-3">Website </div>
        <div class="col-11 offset-1 pt-2"><input type="text" id="_website" class="form-control"
                                                 th:value="${user.website}" readonly></div>
        <div class="col-10 offset-1 pt-3">Linkdin </div>
        <div class="col-11 offset-1 pt-2 mb-3"><input type="text" id="_linkdin" class="form-control"
                                                      th:value="${user.linkdin} " readonly></div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade pt-3" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
       aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog ">
      <div class="modal-content ">
        <div class="modal-header">
          <h6 class="modal-title px-3" id="staticBackdropLabel">Edit Profile</h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="Close"></button>
        </div>

        <form th:object="${user}" enctype="multipart/form-data" th:action="@{/update/user}" method="post">
          <div class="modal-body">
            <div class="row pe-4">
              <div class="col-5 offset-1 pb-2">First Name <span class="medatory">*</span></div>
              <div class="col-5 offset-1 pb-2">Last Name <span class="medatory">*</span></div>
              <div class="col-5 offset-1"><input type="text" id="firstName" name="firstName" class="form-control"
                                                 th:value="${user.firstName}"></div>
              <div class="col-5 offset-1"><input type="text" id="lastName" name="lastName" class="form-control"
                                                 th:value="${user.lastName}"></div>
              <div class="col-10 offset-1 pt-3">Email <span class="medatory">*</span></div>
              <div class="col-11 offset-1 pt-2"><input type="text" id="email" name="email" class="form-control"
                                                       th:value="${user.email}">
              </div>
              <div class="col-10 offset-1 pt-3">Password <span class="medatory">*</span></div>
              <div class="col-11 offset-1 pt-2"><input type="password" id="password" name="password" th:value="${user.password}"
                                                       class="form-control">
              </div>
              <div class="col-10 offset-1 pt-3">Country <span class="medatory">*</span></div>
              <div class="col offset-1 pt-2">
                <select class="form-select" aria-label="Default select example" id="country" >
                  <option th:each="country : ${countries}" th:value="${country.countryCode}"
                          th:text="${country.countryName}" th:selected="${user.country.countryCode} == ${country.countryCode} ">
                  </option>
                </select>
              </div>
              <div class="col-10 offset-1 pt-3 pb-2">Phone Number <span class="medatory">*</span></div>
              <div class="col-3 offset-1">
                <select class="form-select" aria-label="Default select example" id="countryCode" disabled>
                  <option th:text="${user.country.countryCode}" th:selected="${user.country.countryCode}"></option>
                </select>
              </div>
              <div class="col-7 offset-1"><input type="text" id="mobile" name="mobile" class="form-control"
                                                 th:value="${user.mobile}"></div>
              <div class="col-10 offset-1 pt-3">Website </div>
              <div class="col-11 offset-1 pt-2"><input type="text" id="website" name="website" class="form-control"
                                                       th:value="${user.website}">
              </div>
<!--              <div class="col-11 offset-1 pt-2">-->
                <input type="text" id="cid" name="countryCode" class="form-control"
                                                       th:value="${user.country.countryCode}" value="${user.country.countryCode}" hidden>
<!--              </div>-->
              <div class="col-10 offset-1 pt-3">Linkdin </div>
              <div class="col-11 offset-1 pt-2"><input type="text" id="linkdin" name="linkdin" class="form-control"
                                                       th:value="${user.linkdin}">
              </div>
            </div>
          </div>
          <div class="col-4 offset-8 pb-4">
            <input type="hidden" th:csrf="${_csrf.token}" />
            <button type="button" class="btn btn-light btn-outline-secondary pe-2 me-2"
                    data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-success ms-2 ps-2" onclick="profileUpdated()">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- adding profile here -->
  <script>
      document.addEventListener("DOMContentLoaded", function () {
        var selectElement1 = document.getElementById("country");
        var selectElement2 = document.getElementById("countryCode");

        selectElement1.addEventListener("change", function () {
          var selectedValue = selectElement1.options[selectElement1.selectedIndex].value;
          console.log(selectedValue);
          var selectedOption = selectElement2.options[selectElement2.selectedIndex];
          selectedOption.text = `${selectElement1.value}`;
          selectedOption.value = `${selectElement1.value}`;
           var test = document.getElementById("cid");
           test.setAttribute("value", selectedValue);
           test.setAttribute("th:value", selectedValue);

        });
      });
    </script>
</section>
<!-- Add Bootstrap JavaScript and jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>

</body>

</html>